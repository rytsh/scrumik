import{S as Z,i as ee,s as te,e as b,t as L,k as I,c as p,a as v,h as $,d as h,m as R,b as i,g as A,F as a,L as O,M as de,N as fe,E as S,O as ge,P as ue,j as se,Q as ke,R as me,T as ye,v as Ne,U as xe,V as Ie,W as Re,w as le,x as oe,y as re,q as ae,o as ne,B as ie}from"../chunks/index-2a59a6fe.js";import{c as De,d as we,i as Le,r as $e,g as Pe,s as Te,a as he,b as Ce,e as ce,f as Ee,h as je}from"../chunks/name-1ae25029.js";import"../chunks/index-d55bf246.js";const Ae=[{text:"1",emoji:!1},{text:"2",emoji:!1},{text:"3",emoji:!1},{text:"5",emoji:!1},{text:"8",emoji:!1},{text:"13",emoji:!1},{text:"21",emoji:!1},{text:"34",emoji:!1},{text:"55",emoji:!1},{text:"\u2615",emoji:!0},{text:"\u{1F92F}",emoji:!0},{text:"\u{1F52D}",emoji:!0},{text:"\u2754",emoji:!0}];function Ue(n){let e,t,l,o,r,s,f,c,d,u,_,g,k,m,E,y,x,w,N,V,U,D,B,j,q,H,X,Q;return{c(){e=b("div"),t=b("h2"),l=L("Create Room"),o=I(),r=b("form"),s=b("label"),f=b("span"),c=L("Room Name"),d=I(),u=b("input"),_=I(),g=b("label"),k=b("span"),m=L("Passcode"),E=I(),y=b("input"),x=I(),w=b("label"),N=b("span"),V=L("Leader Passcode"),U=I(),D=b("input"),B=I(),j=b("button"),q=L("Create Room"),this.h()},l(T){e=p(T,"DIV",{class:!0});var P=v(e);t=p(P,"H2",{class:!0});var G=v(t);l=$(G,"Create Room"),G.forEach(h),o=R(P),r=p(P,"FORM",{});var C=v(r);s=p(C,"LABEL",{});var F=v(s);f=p(F,"SPAN",{class:!0});var W=v(f);c=$(W,"Room Name"),W.forEach(h),d=R(F),u=p(F,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,class:!0}),F.forEach(h),_=R(C),g=p(C,"LABEL",{});var M=v(g);k=p(M,"SPAN",{class:!0});var z=v(k);m=$(z,"Passcode"),z.forEach(h),E=R(M),y=p(M,"INPUT",{type:!0,name:!0,autocomplete:!0,placeholder:!0,class:!0}),M.forEach(h),x=R(C),w=p(C,"LABEL",{});var J=v(w);N=p(J,"SPAN",{class:!0});var K=v(N);V=$(K,"Leader Passcode"),K.forEach(h),U=R(J),D=p(J,"INPUT",{type:!0,name:!0,autocomplete:!0,placeholder:!0,class:!0}),J.forEach(h),B=R(C),j=p(C,"BUTTON",{type:!0,class:!0});var Y=v(j);q=$(Y,"Create Room"),Y.forEach(h),C.forEach(h),P.forEach(h),this.h()},h(){i(t,"class","font-semibold leading-tight mb-4 text-3xl"),i(f,"class","text-sm font-bold block mb-2"),i(u,"type","text"),i(u,"name","name"),i(u,"placeholder","Enter a room name"),i(u,"autocomplete","off"),u.required=!0,i(u,"class","mb-4 form-input"),i(k,"class","text-sm font-bold block mb-2"),i(y,"type","text"),i(y,"name","passCode"),i(y,"autocomplete","off"),i(y,"placeholder","Optional passcode to join room"),i(y,"class","mb-4 form-input"),i(N,"class","text-sm font-bold block mb-2"),i(D,"type","text"),i(D,"name","leaderCode"),i(D,"autocomplete","off"),i(D,"placeholder","If not set, will be the same as passcode"),i(D,"class","mb-4 form-input"),i(j,"type","submit"),j.value="create",i(j,"class","block border border-black bg-white text-black hover:bg-nl hover:text-white font-bold py-1 px-3 rounded"),i(e,"class",H=`${n[0]} p-6 bg-white`)},m(T,P){A(T,e,P),a(e,t),a(t,l),a(e,o),a(e,r),a(r,s),a(s,f),a(f,c),a(s,d),a(s,u),a(r,_),a(r,g),a(g,k),a(k,m),a(g,E),a(g,y),a(r,x),a(r,w),a(w,N),a(N,V),a(w,U),a(w,D),a(r,B),a(r,j),a(j,q),n[3](r),X||(Q=O(r,"submit",de(fe(n[2]))),X=!0)},p(T,[P]){P&1&&H!==(H=`${T[0]} p-6 bg-white`)&&i(e,"class",H)},i:S,o:S,d(T){T&&h(e),n[3](null),X=!1,Q()}}}function Be(n,e,t){let{class:l=""}=e,o;const r=async()=>{const f=new FormData(o),c={info:{name:f.get("name")},password:{passCode:f.get("passCode"),leaderCode:f.get("leaderCode")},cards:Ae};c.password.leaderCode==""&&(c.password.leaderCode=c.password.passCode);try{const d=await De(we,c);window.location.href=`/room/${d}?password=${c.password.leaderCode}`}catch(d){console.error(d)}};function s(f){ge[f?"unshift":"push"](()=>{o=f,t(1,o)})}return n.$$set=f=>{"class"in f&&t(0,l=f.class)},[l,o,r,s]}class Ve extends Z{constructor(e){super(),ee(this,e,Be,Ue,te,{class:0})}}function Oe(n){var Q;let e,t,l,o,r,s,f,c,d,u,_,g,k,m,E,y,x,w,N,V,U,D,B=((Q=n[2])!=null?Q:"")+"",j,q,H,X;return{c(){e=b("div"),t=b("h2"),l=L("Join Room"),o=I(),r=b("form"),s=b("label"),f=b("span"),c=L("Room ID"),d=I(),u=b("input"),_=I(),g=b("label"),k=b("span"),m=L("Password"),E=I(),y=b("input"),x=I(),w=b("div"),N=b("button"),V=L("Join"),U=I(),D=b("button"),j=L(B),this.h()},l(T){e=p(T,"DIV",{class:!0});var P=v(e);t=p(P,"H2",{class:!0});var G=v(t);l=$(G,"Join Room"),G.forEach(h),o=R(P),r=p(P,"FORM",{});var C=v(r);s=p(C,"LABEL",{});var F=v(s);f=p(F,"SPAN",{class:!0});var W=v(f);c=$(W,"Room ID"),W.forEach(h),d=R(F),u=p(F,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),F.forEach(h),_=R(C),g=p(C,"LABEL",{});var M=v(g);k=p(M,"SPAN",{class:!0});var z=v(k);m=$(z,"Password"),z.forEach(h),E=R(M),y=p(M,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),M.forEach(h),x=R(C),w=p(C,"DIV",{class:!0});var J=v(w);N=p(J,"BUTTON",{type:!0,class:!0});var K=v(N);V=$(K,"Join"),K.forEach(h),U=R(J),D=p(J,"BUTTON",{type:!0,class:!0});var Y=v(D);j=$(Y,B),Y.forEach(h),J.forEach(h),C.forEach(h),P.forEach(h),this.h()},h(){i(t,"class","font-semibold leading-tight mb-4 text-3xl"),i(f,"class","text-sm font-bold block mb-2"),i(u,"type","text"),i(u,"name","roomID"),i(u,"placeholder","Room ID"),u.required=!0,i(u,"class","mb-4 form-input"),i(k,"class","text-sm font-bold block mb-2"),i(y,"type","password"),i(y,"name","passCode"),i(y,"placeholder","Leave it empty if don't need password"),i(y,"class","mb-4 form-input"),i(N,"type","submit"),N.value="join",i(N,"class","border border-black bg-white text-black hover:bg-nl hover:text-white font-bold py-1 px-3 rounded"),i(D,"type","button"),i(D,"class","border border-black bg-white text-black hover:bg-red-500 hover:text-white font-bold py-1 px-3 rounded"),ue(D,"invisible",!n[2]),i(w,"class","block"),i(e,"class",q=`${n[0]} p-6 bg-white`)},m(T,P){A(T,e,P),a(e,t),a(t,l),a(e,o),a(e,r),a(r,s),a(s,f),a(f,c),a(s,d),a(s,u),a(r,_),a(r,g),a(g,k),a(k,m),a(g,E),a(g,y),a(r,x),a(r,w),a(w,N),a(N,V),a(w,U),a(w,D),a(D,j),n[5](r),H||(X=[O(D,"click",n[4]),O(r,"submit",de(fe(n[3])))],H=!0)},p(T,[P]){var G;P&4&&B!==(B=((G=T[2])!=null?G:"")+"")&&se(j,B),P&4&&ue(D,"invisible",!T[2]),P&1&&q!==(q=`${T[0]} p-6 bg-white`)&&i(e,"class",q)},i:S,o:S,d(T){T&&h(e),n[5](null),H=!1,ke(X)}}}function Se(n,e,t){let{class:l=""}=e,o,r;const s=async()=>{const d=new FormData(o),u=d.get("roomID"),_=d.get("password");try{if(!await Le(we,u,_))throw new Error("Passcode is not correct");$e(u,_)}catch(g){t(2,r=g.message)}},f=()=>t(2,r="");function c(d){ge[d?"unshift":"push"](()=>{o=d,t(1,o)})}return n.$$set=d=>{"class"in d&&t(0,l=d.class)},[l,o,r,s,f,c]}class Fe extends Z{constructor(e){super(),ee(this,e,Se,Oe,te,{class:0})}}function be(n){let e,t,l,o;return{c(){e=b("button"),t=L("Save"),this.h()},l(r){e=p(r,"BUTTON",{class:!0});var s=v(e);t=$(s,"Save"),s.forEach(h),this.h()},h(){i(e,"class","px-2 h-7 border-l border-b border-black self-end hover:bg-green-500 hover:text-white")},m(r,s){A(r,e,s),a(e,t),l||(o=O(e,"click",n[3]),l=!0)},p:S,d(r){r&&h(e),l=!1,o()}}}function Me(n){let e,t;return{c(){e=b("span"),t=L(n[2]),this.h()},l(l){e=p(l,"SPAN",{class:!0});var o=v(e);t=$(o,n[2]),o.forEach(h),this.h()},h(){i(e,"class","font-bold text-xl px-2")},m(l,o){A(l,e,o),a(e,t)},p(l,o){o&4&&se(t,l[2])},d(l){l&&h(e)}}}function Je(n){let e,t,l,o,r,s,f;return{c(){e=b("form"),t=b("input"),l=I(),o=b("button"),r=L("Generate Name"),this.h()},l(c){e=p(c,"FORM",{});var d=v(e);t=p(d,"INPUT",{class:!0,type:!0}),l=R(d),o=p(d,"BUTTON",{class:!0,type:!0});var u=v(o);r=$(u,"Generate Name"),u.forEach(h),d.forEach(h),this.h()},h(){i(t,"class","bg-gray-100 border border-gray-200 flex-1 px-2 text-xl font-bold"),i(t,"type","text"),i(o,"class","bg-white border border-black px-2 text-xl hover:bg-nl hover:text-white"),i(o,"type","button")},m(c,d){A(c,e,d),a(e,t),me(t,n[2]),a(e,l),a(e,o),a(o,r),s||(f=[O(t,"input",n[5]),O(o,"click",n[6]),O(e,"submit",de(fe(n[3])))],s=!0)},p(c,d){d&4&&t.value!==c[2]&&me(t,c[2])},d(c){c&&h(e),s=!1,ke(f)}}}function qe(n){let e,t,l,o,r,s=n[1]?"Cancel":"Edit Nickname",f,c,d,u,_,g,k,m=n[1]&&be(n);function E(w,N){return w[1]?Je:Me}let y=E(n),x=y(n);return{c(){e=b("div"),t=b("div"),l=b("div"),m&&m.c(),o=I(),r=b("button"),f=L(s),d=I(),u=b("div"),x.c(),this.h()},l(w){e=p(w,"DIV",{class:!0});var N=v(e);t=p(N,"DIV",{class:!0});var V=v(t);l=p(V,"DIV",{});var U=v(l);m&&m.l(U),o=R(U),r=p(U,"BUTTON",{class:!0});var D=v(r);f=$(D,s),D.forEach(h),U.forEach(h),V.forEach(h),d=R(N),u=p(N,"DIV",{class:!0});var B=v(u);x.l(B),B.forEach(h),N.forEach(h),this.h()},h(){i(r,"class",c=`float-right px-2 h-7 border-l border-b border-black self-end hover:text-white ${n[1]?"hover:bg-red-500":"hover:bg-nl"}`),i(t,"class","float-right"),i(u,"class","py-6 pl-4 pr-6"),i(e,"class",_=`${n[0]} bg-white`)},m(w,N){A(w,e,N),a(e,t),a(t,l),m&&m.m(l,null),a(l,o),a(l,r),a(r,f),a(e,d),a(e,u),x.m(u,null),g||(k=O(r,"click",n[4]),g=!0)},p(w,[N]){w[1]?m?m.p(w,N):(m=be(w),m.c(),m.m(l,o)):m&&(m.d(1),m=null),N&2&&s!==(s=w[1]?"Cancel":"Edit Nickname")&&se(f,s),N&2&&c!==(c=`float-right px-2 h-7 border-l border-b border-black self-end hover:text-white ${w[1]?"hover:bg-red-500":"hover:bg-nl"}`)&&i(r,"class",c),y===(y=E(w))&&x?x.p(w,N):(x.d(1),x=y(w),x&&(x.c(),x.m(u,null))),N&1&&_!==(_=`${w[0]} bg-white`)&&i(e,"class",_)},i:S,o:S,d(w){w&&h(e),m&&m.d(),x.d(),g=!1,k()}}}function He(n,e,t){var _;let l=!1,{class:o=""}=e,{id:r,nick:s}=(_=Pe())!=null?_:Te(he());const f=()=>{Ce(r,s),t(1,l=!1)},c=()=>{t(1,l=!l)};function d(){s=this.value,t(2,s)}const u=()=>t(2,s=he());return n.$$set=g=>{"class"in g&&t(0,o=g.class)},[o,l,s,f,c,d,u]}class Ge extends Z{constructor(e){super(),ee(this,e,He,qe,te,{class:0})}}const Xe=n=>window.confirm(n);function pe(n,e,t){const l=n.slice();return l[3]=e[t],l}function Qe(n){let e,t;return{c(){e=b("p"),t=L("No rooms yet"),this.h()},l(l){e=p(l,"P",{class:!0});var o=v(e);t=$(o,"No rooms yet"),o.forEach(h),this.h()},h(){i(e,"class","italic")},m(l,o){A(l,e,o),a(e,t)},p:S,d(l){l&&h(e)}}}function We(n){let e,t=[],l=new Map,o=n[1];const r=s=>s[3].id;for(let s=0;s<o.length;s+=1){let f=pe(n,o,s),c=r(f);l.set(c,t[s]=_e(c,f))}return{c(){e=b("ul");for(let s=0;s<t.length;s+=1)t[s].c()},l(s){e=p(s,"UL",{});var f=v(e);for(let c=0;c<t.length;c+=1)t[c].l(f);f.forEach(h)},m(s,f){A(s,e,f);for(let c=0;c<t.length;c+=1)t[c].m(e,null)},p(s,f){f&2&&(o=s[1],t=Ie(t,f,r,1,s,o,l,e,Re,_e,null,pe))},d(s){s&&h(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function _e(n,e){let t,l,o=e[3].name+"",r,s,f,c,d,u,_,g;function k(){return e[2](e[3])}return{key:n,first:null,c(){t=b("li"),l=b("a"),r=L(o),f=I(),c=b("button"),d=L("delete"),u=I(),this.h()},l(m){t=p(m,"LI",{class:!0});var E=v(t);l=p(E,"A",{class:!0,href:!0});var y=v(l);r=$(y,o),y.forEach(h),f=R(E),c=p(E,"BUTTON",{class:!0});var x=v(c);d=$(x,"delete"),x.forEach(h),u=R(E),E.forEach(h),this.h()},h(){i(l,"class","w-full leading-10 hover:bg-green-500 hover:text-white px-2"),i(l,"href",s=`/room/${e[3].id}`),i(c,"class","border-l border-black bg-white hover:bg-red-500 hover:text-white px-2"),i(t,"class","flex justify-between odd:bg-gray-100 even:bg-gray-200 first:border-t border-b border-black"),this.first=t},m(m,E){A(m,t,E),a(t,l),a(l,r),a(t,f),a(t,c),a(c,d),a(t,u),_||(g=O(c,"click",k),_=!0)},p(m,E){e=m,E&2&&o!==(o=e[3].name+"")&&se(r,o),E&2&&s!==(s=`/room/${e[3].id}`)&&i(l,"href",s)},d(m){m&&h(t),_=!1,g()}}}function ze(n){let e,t,l,o,r,s;function f(u,_){return u[1]!=null&&u[1].length>0?We:Qe}let c=f(n),d=c(n);return{c(){e=b("div"),t=b("h2"),l=L("Room List"),o=I(),r=b("div"),d.c(),this.h()},l(u){e=p(u,"DIV",{class:!0});var _=v(e);t=p(_,"H2",{class:!0});var g=v(t);l=$(g,"Room List"),g.forEach(h),o=R(_),r=p(_,"DIV",{});var k=v(r);d.l(k),k.forEach(h),_.forEach(h),this.h()},h(){i(t,"class","font-semibold leading-tight mb-4 text-3xl"),i(e,"class",s=`${n[0]} p-6 bg-white`)},m(u,_){A(u,e,_),a(e,t),a(t,l),a(e,o),a(e,r),d.m(r,null)},p(u,[_]){c===(c=f(u))&&d?d.p(u,_):(d.d(1),d=c(u),d&&(d.c(),d.m(r,null))),_&1&&s!==(s=`${u[0]} p-6 bg-white`)&&i(e,"class",s)},i:S,o:S,d(u){u&&h(e),d.d()}}}function Ke(n,e,t){let l;ye(n,je,s=>t(1,l=s));let{class:o=""}=e;Ne(()=>{ce(),window.addEventListener("storage",ce)}),xe(()=>{window.removeEventListener("storage",ce)});const r=s=>{Xe(`Are you sure to delete? [${s.name}]`)&&Ee(s.id)};return n.$$set=s=>{"class"in s&&t(0,o=s.class)},[o,l,r]}class Ye extends Z{constructor(e){super(),ee(this,e,Ke,ze,te,{class:0})}}function ve(n){let e,t,l,o,r,s,f,c;return{c(){e=b("div"),t=b("span"),l=L(n[0]),o=I(),r=b("button"),s=L("X"),this.h()},l(d){e=p(d,"DIV",{class:!0});var u=v(e);t=p(u,"SPAN",{class:!0});var _=v(t);l=$(_,n[0]),_.forEach(h),o=R(u),r=p(u,"BUTTON",{class:!0});var g=v(r);s=$(g,"X"),g.forEach(h),u.forEach(h),this.h()},h(){i(t,"class","p-2"),i(r,"class","border-l border-black bg-gray-200 hover:bg-nl px-2 float-right"),i(e,"class","border-t border-b sm:border border-black mb-3 bg-yellow-200")},m(d,u){A(d,e,u),a(e,t),a(t,l),a(e,o),a(e,r),a(r,s),f||(c=O(r,"click",n[2]),f=!0)},p(d,u){u&1&&se(l,d[0])},d(d){d&&h(e),f=!1,c()}}}function Ze(n){let e,t,l,o,r,s,f,c,d,u,_,g,k=n[0]&&ve(n);return o=new Fe({props:{class:"flex-1 border-t border-b sm:border border-black h-fit"}}),s=new Ye({props:{class:"flex-1 border-t border-b sm:border border-black h-fit"}}),d=new Ge({props:{class:"flex-1 border-t border-b sm:border border-black h-fit"}}),_=new Ve({props:{class:"flex-1 border-t border-b sm:border border-black h-fit"}}),{c(){k&&k.c(),e=I(),t=b("div"),l=b("div"),le(o.$$.fragment),r=I(),le(s.$$.fragment),f=I(),c=b("div"),le(d.$$.fragment),u=I(),le(_.$$.fragment),this.h()},l(m){k&&k.l(m),e=R(m),t=p(m,"DIV",{class:!0});var E=v(t);l=p(E,"DIV",{class:!0});var y=v(l);oe(o.$$.fragment,y),r=R(y),oe(s.$$.fragment,y),y.forEach(h),f=R(E),c=p(E,"DIV",{class:!0});var x=v(c);oe(d.$$.fragment,x),u=R(x),oe(_.$$.fragment,x),x.forEach(h),E.forEach(h),this.h()},h(){i(l,"class","flex flex-1 flex-col gap-3"),i(c,"class","flex flex-1 flex-col gap-3"),i(t,"class","flex flex-1 gap-3 md:flex-row flex-col")},m(m,E){k&&k.m(m,E),A(m,e,E),A(m,t,E),a(t,l),re(o,l,null),a(l,r),re(s,l,null),a(t,f),a(t,c),re(d,c,null),a(c,u),re(_,c,null),g=!0},p(m,[E]){m[0]?k?k.p(m,E):(k=ve(m),k.c(),k.m(e.parentNode,e)):k&&(k.d(1),k=null)},i(m){g||(ae(o.$$.fragment,m),ae(s.$$.fragment,m),ae(d.$$.fragment,m),ae(_.$$.fragment,m),g=!0)},o(m){ne(o.$$.fragment,m),ne(s.$$.fragment,m),ne(d.$$.fragment,m),ne(_.$$.fragment,m),g=!1},d(m){k&&k.d(m),m&&h(e),m&&h(t),ie(o),ie(s),ie(d),ie(_)}}}async function ot({url:n}){var l,o;const e=(l=n.searchParams.get("msg"))!=null?l:"",t=(o=n.searchParams.get("kickRoom"))!=null?o:"";return{props:{msg:e,kickRoom:t}}}function et(n,e,t){let{msg:l=""}=e,{kickRoom:o=""}=e;o&&Ee(o);const r=()=>t(0,l="");return n.$$set=s=>{"msg"in s&&t(0,l=s.msg),"kickRoom"in s&&t(1,o=s.kickRoom)},[l,o,r]}class rt extends Z{constructor(e){super(),ee(this,e,et,Ze,te,{msg:0,kickRoom:1})}}export{rt as default,ot as load};
